(()=>{"use strict";function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.header=document.createElement("header"),this.title=this.header.appendChild(document.createElement("h1")),this.title.textContent="Virtual keyboard",this.title.classList.add("title")}var a,n;return a=t,(n=[{key:"getHeaderElement",value:function(){return this.header}}])&&e(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),t}();const a={L_SHIFT_KEY:"Shift",R_SHIFT_KEY:"rShift",CTRL_KEY:"Ctrl",WIN_KEY:"Win",ALT_KEY:"Alt",BACKSPACE_KEY:"Backspace",CAPS_LOCK_KEY:"Caps Lock",KEYBOARD_STATE:{caseDown:"caseDown",caseUp:"caseUp",caps:"caps",shiftCaps:"shiftCaps"},LANGS:{eng:"eng",rus:"rus"},KEY_NAMES:[["tilde","1","2","3","4","5","6","7","8","9","0","minus","equal","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","openBracket","closeBracket","slash"],["Caps Lock","a","s","d","f","g","h","j","k","l","semicolon","quote","Enter"],["Shift","z","x","c","v","b","n","m","colon","dot","rslash","up","rShift"],["Ctrl","Win","Alt","space","Alt","left","down","right","Ctrl"]],LAYOUTS:{eng:{caseDown:[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\"],["Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","up","rShift"],["Ctrl","Win","Alt","","Alt","left","down","right","Ctrl"]],caseUp:[["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|"],["Caps Lock","A","S","D","F","G","H","J","K","L",":",'"',"Enter"],["Shift","Z","X","C","V","B","N","M","<",">","?","up","rShift"],["Ctrl","Win","Alt","","Alt","left","down","right","Ctrl"]],caps:[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\"],["Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","up","rShift"],["Ctrl","Win","Alt","","Alt","left","down","right","Ctrl"]],shiftCaps:[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\"],["Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","up","rShift"],["Ctrl","Win","Alt","","Alt","left","down","right","Ctrl"]]},rus:{caseDown:[["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\"],["Caps Lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter"],["Shift","я","ч","с","м","и","т","ь","б","ю",".","up","Shift"],["Ctrl","Win","Alt","","Alt","left","down","right","Ctrl"]],caseUp:[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","t","y","u","i","o","p","[","]","\\"],["Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","up","Shift"],["Ctrl","Win","Alt","","Alt","left","down","right","Ctrl"]],caps:[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","t","y","u","i","o","p","[","]","\\"],["Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","up","Shift"],["Ctrl","Win","Alt","","Alt","left","down","right","Ctrl"]],shiftCaps:[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","t","y","u","i","o","p","[","]","\\"],["Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","up","Shift"],["Ctrl","Win","Alt","","Alt","left","down","right","Ctrl"]]}}};function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyboard=t,this.textarea=a}var t,r;return t=e,(r=[{key:"attachEventsToKeys",value:function(){var e=this.keyboard.getKeyElementsArray(),t=this.textarea.getTextareaElement(),n=this.keyboard,r=function(e){var a=n.getKeyboardState(),r=e.target;r.classList.contains("".concat(a))?(r.parentElement.parentElement.classList.add("active"),setTimeout(r.parentElement.parentElement.classList.remove("active"),500)):(r.classList.add("active"),setTimeout(r.classList.remove("active"),500));var i=r.classList.contains("".concat(a))?r:r.querySelector(".".concat(a));console.log(r),console.log(i);var s=i.textContent;t.focus();var o=t.selectionStart;t.value="".concat(t.value.slice(0,t.selectionStart)).concat(s).concat(t.value.slice(t.selectionStart)),t.selectionStart=o+1,t.selectionEnd=o+1};e.forEach((function(e){switch(e.textContent){case a.L_SHIFT_KEY:n.leftShiftKeyPressed=!n.leftShiftKeyPressed,n.updateState();break;case a.R_SHIFT_KEY:n.rightShiftKeyPressed=!n.rightShiftKeyPressed,n.updateState();break;case a.ALT_KEY:n.altPressed=!n.altPressed,n.updateState();break;case a.CTRL_KEY:n.ctrlPress=!n.ctrlPress,n.updateState();break;case a.BACKSPACE_KEY:i=t.selectionStart,t.value="".concat(t.value.slice(0,i-1)).concat(t.value.slice(i)),t.selectionEnd=i-1,t.selectionStart=i-1;break;default:e.addEventListener("click",r)}var i}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.leftShiftKeyPressed=!1,this.rightShiftKeyPressed=!1,this.capsLockPressed=!1,this.altPressed=!1,this.ctrlPressed=!1,this.keyBoardLand=a.LANGS.eng,this.keyboard=document.createElement("div"),this.keyboard.classList.add("keyboard"),this.keyboardState=a.KEYBOARD_STATE.caseDown,this.keyElementsArray=[];for(var n=function(e){var n=t.keyboard.appendChild(document.createElement("div"));n.classList.add("keyboard__row");for(var r=function(r){var i=n.appendChild(document.createElement("div"));i.classList.add("keyboard__key","key"),i.setAttribute("data-".concat(a.KEY_NAMES)),t.keyElementsArray.push(i),Object.keys(a.LAYOUTS).forEach((function(t,n){var s=i.appendChild(document.createElement("span"));s.classList.add(t),n>0&&s.classList.add("hidden");var o=s.appendChild(document.createElement("span"));o.textContent=a.LAYOUTS[t].caseDown[e][r],o.classList.add("caseDown");var c=s.appendChild(document.createElement("span"));c.textContent=a.LAYOUTS[t].caseUp[e][r],c.classList.add("caseUp","hidden");var l=s.appendChild(document.createElement("span"));l.textContent=a.LAYOUTS[t].caps[e][r],l.classList.add("caps","hidden");var d=s.appendChild(document.createElement("span"));d.textContent=a.LAYOUTS[t].shiftCaps[e][r],d.classList.add("shiftCaps","hidden")}))},i=0;i<a.LAYOUTS.eng.caseDown[e].length;i+=1)r(i)},r=0;r<a.LAYOUTS.eng.caseDown.length;r+=1)n(r)}var t,n;return t=e,(n=[{key:"getKeyboardElement",value:function(){return this.keyboard}},{key:"getKeyElementsArray",value:function(){return this.keyElementsArray}},{key:"getKeyboardState",value:function(){return this.keyboardState}},{key:"setKeyboardState",value:function(e){this.keyboardState=e}},{key:"updateState",value:function(){var e=this.leftShiftKeyPressed||this.rightShiftKeyPressed;e||this.capsLockPressed||this.setKeyboardState(a.KEYBOARD_STATE.caseDown),e&&!this.capsLockPressed&&this.setKeyboardState(a.KEYBOARD_STATE.caseUp),!e&&this.capsLockPressed&&this.setKeyboardState(a.KEYBOARD_STATE.caps),e&&this.capsLockPressed&&this.setKeyboardState(a.KEYBOARD_STATE.shiftCaps)}},{key:"updateKeyboardElements",value:function(){var e=this;this.keyElementsArray.forEach((function(t){t.children.forEach((function(e){e.forEach((function(e){e.classList.add("hidden")}))})),t.querySelectorAll(".".concat(e.state)).forEach((function(e){e.classList.remove("hidden")}))}))}},{key:"switchLanguage",value:function(){this.keyElementsArray.forEach((function(e){}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textareaContainer=document.createElement("div"),this.textarea=this.textareaContainer.appendChild(document.createElement("textarea")),this.textarea.classList.add("body__textarea","textarea")}var t,a;return t=e,(a=[{key:"getTextareaContainer",value:function(){return this.textareaContainer}},{key:"getTextareaElement",value:function(){return this.textarea}}])&&o(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.main=document.createElement("main"),this.main.classList.add("body__main");var t=new c,a=t.getTextareaContainer();this.main.appendChild(a);var n=new s,i=n.getKeyboardElement();this.main.appendChild(i),new r(n,t).attachEventsToKeys()}var t,a;return t=e,(a=[{key:"getMainElement",value:function(){return this.main}}])&&l(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.footer=document.createElement("footer"),this.copyright=this.footer.appendChild(document.createElement("div")),this.copyright.classList.add("copyright"),this.copyright.textContent="© 2022"}var t,a;return t=e,(a=[{key:"getFooterElement",value:function(){return this.footer}}])&&h(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p=document.getElementsByTagName("body")[0].appendChild(document.createElement("div"));p.classList.add("body__wrapper");var f=(new t).getHeaderElement();p.appendChild(f);var y=(new d).getMainElement();p.appendChild(y);var E=(new u).getFooterElement();p.appendChild(E)})();